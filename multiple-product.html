<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myntra</title>
    <link rel="icon" type="image/x-icon" href="img/myntra.png">
    <link rel="stylesheet" href="/myntra.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
        integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div id="screen">
        <div class="nav">
            <div class="logo">
                <img src="/img/myntra.png" alt="logo">
            </div>
            <div class="nav-link">
                <div class="nav-item">
                    <h1>Men</h1>
                </div>
                <div class="nav-item">
                    <h1>Women</h1>
                </div>
                <div class="nav-item">
                    <h1>Kids</h1>
                </div>
                <div class="nav-item">
                    <h1>Home & Living</h1>
                </div>
                <div class="nav-item">
                    <h1>Beauty</h1>
                </div>
                <div class="nav-item">
                    <h1>Studio <sup>New</sup></h1>
                </div>
            </div>
            <div class="searchbar">
                <div class="search-item">
                    <i class="fa fa-search" aria-hidden="true"></i>
                    <input type="search" placeholder="Search for products, brands and more">
                </div>
            </div>
            <div class="info">
                <div class="info-item">
                    <i class="fa-regular fa-user"></i>
                    <a href="./sign-up.html" id="switch">profile</a>
                </div>
                <div class="info-item">
                    <i class="fa-regular fa-heart"></i>
                    <a>wishlist</a>
                </div>
                <div class="info-item">
                    <i class="fa-solid fa-bag-shopping"></i>
                    <a>bag</a>
                </div>
                <div class="info-item" id="logout">
                    
                </div>
            </div>
        </div>
     

        <div class="dynamic-product-list-wrapper">
            <div class="dynamic-product-container" id="products">
                <div> </div>
            </div>
        </div>


    </div>
   



    <script>
        window.onload = function () {
            // alert("CKJAN")

            // alert("working")
            var currentUser = JSON.parse(localStorage.getItem("myntraCurrentUser"))
            // console.log(currentUser,"currentUser");
            if (!!currentUser) {
                // alert(currentUser.namee)
                var logoutDiv = document.getElementById("logout");
                var divFromHtml = document.getElementById("switch");
                // console.log(divFromHtml,"divFromHtml");
                // var h1 = document.createElement("h1");
                // h1.innerText = "madhuri"
                // divFromHtml.append(h1)
                var button = '<i class="fa-solid fa-arrow-right-from-bracket"></i> <button onclick="logout() ">Logout</button>'
                var name = `<p> ${currentUser.namee}</p>`;
                divFromHtml.innerHTML = name;
                logoutDiv.innerHTML = button;
            }
            // else{
            //     alert("current user absent")
            // }



            function logout() {
                alert("We will miss you..")
                localStorage.removeItem("myntraCurrentUser");
                window.location.reload();
            }


            var divToShowProducts = document.getElementById("products");
            var finalData = "";

            var productsFromLS = JSON.parse(localStorage.getItem("myntraProducts"))
            for (var i = 0; i < productsFromLS.length; i++) {
                finalData += `<a  onclick='redirect(${JSON.stringify(productsFromLS[i])})'>
                            <img src=${productsFromLS[i].proImage} /><div class="g-pro-name">${productsFromLS[i].proName}</div>
                            <div class="g-pro-price">â‚¹  ${productsFromLS[i].proPrice}</div></a>`;
            }

            // console.log(finalData, "finalData here")

            divToShowProducts.innerHTML = finalData;


        }
        function redirect(product) {
            var singleProduct = JSON.stringify(product);
            // console.log(s, " s here")
            // alert("Working")
            localStorage.setItem("myntra-current-product", singleProduct);
            window.location.href = './product-details2.html'
        }
    </script>
    <script src="./main.js"></script>
    </body>
</html>